# üöÄ XCLUSIV - Landing Page de Preventa

Landing page profesional para preventa de prendas con integraci√≥n a Google Sheets, construida con Next.js 14, TypeScript y TailwindCSS.

## ‚ú® Caracter√≠sticas

- ‚ö° **Next.js 14** con App Router
- üé® **TailwindCSS** para estilos modernos y responsivos
- üìù **TypeScript** para mayor seguridad de tipos
- üîê **Validaci√≥n** con React Hook Form y Zod
- üìä **Google Sheets** integraci√≥n v√≠a webhook de Apps Script
- ü§ñ **reCAPTCHA v3** (opcional) para seguridad
- üìà **Google Tag Manager** soporte integrado
- üéØ **SEO optimizado** con metadata completa
- üì± **100% Responsive** - Mobile First
- üöÄ **Vercel** ready para deploy instant√°neo

## üìã Requisitos Previos

- Node.js 18 o superior
- npm o yarn
- Cuenta de Google (para Google Sheets)
- Cuenta de Vercel (opcional, para deployment)

## üõ†Ô∏è Instalaci√≥n

1. **Clona el repositorio o copia los archivos:**

```bash
cd tu-proyecto
```

2. **Instala las dependencias:**

```bash
npm install
```

3. **Configura las variables de entorno:**

Copia el archivo `.env.example` a `.env.local`:

```bash
cp .env.example .env.local
```

Edita `.env.local` con tus valores:

```env
# URL del webhook de Google Apps Script
APP_WEBHOOK_URL=https://script.google.com/macros/s/TU_SCRIPT_ID/exec

# Token de seguridad para el webhook
APP_WEBHOOK_TOKEN=tu-token-super-seguro-aqui

# Salt para hashear IPs
APP_HASH_SALT=un-salt-aleatorio-muy-seguro

# reCAPTCHA v3 (opcional)
NEXT_PUBLIC_RECAPTCHA_KEY=tu-recaptcha-site-key
RECAPTCHA_SECRET=tu-recaptcha-secret-key

# Google Tag Manager (opcional)
NEXT_PUBLIC_GTM_ID=GTM-XXXXXXX

# URL de tu aplicaci√≥n
NEXT_PUBLIC_APP_URL=https://tu-dominio.com
```

4. **Ejecuta en modo desarrollo:**

```bash
npm run dev
```

Abre [http://localhost:3000](http://localhost:3000) en tu navegador.

## üìä Configuraci√≥n de Google Sheets

### Paso 1: Crear la Hoja de C√°lculo

1. Crea una nueva hoja de c√°lculo en [Google Sheets](https://sheets.google.com)
2. Nombra la primera hoja como "Registros"
3. Crea las siguientes columnas en la primera fila:

```
| A        | B         | C      | D        | E     | F        | G      | H      | I       | J                 | K        | L              | M                 | N       | O          | P          | Q            | R            | S       |
|----------|-----------|--------|----------|-------|----------|--------|--------|---------|-------------------|----------|----------------|-------------------|---------|-----------|-----------|--------------|--------------|---------|
| lead_id  | timestamp | nombre | apellido | email | whatsapp | prenda | talla  | ciudad  | cantidad_estimada | contacto | instagram_user | consent_marketing | ip_hash | utm_source| utm_medium| utm_campaign | utm_content  | referer |
```

### Paso 2: Crear el Apps Script

1. En tu hoja de c√°lculo, ve a **Extensiones > Apps Script**
2. Borra el c√≥digo por defecto y pega el siguiente c√≥digo:

```javascript
function doPost(e) {
  try {
    // Configuraci√≥n
    const AUTHORIZED_TOKEN = "tu-token-super-seguro-aqui"; // Debe coincidir con APP_WEBHOOK_TOKEN
    const SHEET_NAME = "Registros";
    
    // Verificar autorizaci√≥n
    const authHeader = e.parameter.authorization || e.postData?.headers?.Authorization || "";
    const token = authHeader.replace("Bearer ", "");
    
    if (token !== AUTHORIZED_TOKEN) {
      return ContentService.createTextOutput(JSON.stringify({
        success: false,
        error: "No autorizado"
      }))
      .setMimeType(ContentService.MimeType.JSON);
    }
    
    // Parsear datos
    const data = JSON.parse(e.postData.contents);
    
    // Obtener la hoja
    const sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(SHEET_NAME);
    
    if (!sheet) {
      throw new Error("Hoja no encontrada");
    }
    
    // Preparar la fila de datos
    const row = [
      data.lead_id || "",
      data.timestamp || new Date().toISOString(),
      data.email || "",
      data.whatsapp || "",
      data.ciudad || "",
      data.modelo_favorito || "",
      data.talla || "",
      data.intencion_compra || "",
      data.cantidad_estimada || "",
      data.marketing_consent ? "Si" : "No",
      data.ip_hash || "",
      data.utm_source || "",
      data.utm_medium || "",
      data.utm_campaign || "",
      data.utm_content || "",
      data.referer || ""
    ];
    
    // Agregar la fila
    sheet.appendRow(row);
    
    // Respuesta exitosa
    return ContentService.createTextOutput(JSON.stringify({
      success: true,
      message: "Datos guardados correctamente"
    }))
    .setMimeType(ContentService.MimeType.JSON);
    
  } catch (error) {
    return ContentService.createTextOutput(JSON.stringify({
      success: false,
      error: error.toString()
    }))
    .setMimeType(ContentService.MimeType.JSON);
  }
}
```

3. **Guarda el proyecto** (Ctrl+S o Cmd+S)
4. **Despliega el script:**
   - Haz clic en **Implementar** > **Nueva implementaci√≥n**
   - Selecciona tipo: **Aplicaci√≥n web**
   - Ejecutar como: **Yo**
   - Qui√©n tiene acceso: **Cualquier persona**
   - Haz clic en **Implementar**
   - **Copia la URL del webhook** (termina en `/exec`)
   - Pega esta URL en tu `.env.local` como `APP_WEBHOOK_URL`

### Paso 3: Probar el Webhook

Puedes probar el webhook usando curl:

```bash
curl -X POST \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer tu-token-super-seguro-aqui" \
  -d '{
    "lead_id": "test-123",
    "timestamp": "2024-01-01T00:00:00Z",
    "email": "test@example.com",
    "modelo_favorito": "oversized-tee-black",
    "talla": "m",
    "intencion_compra": "seguro",
    "cantidad_estimada": "2",
    "marketing_consent": true,
    "ip_hash": "test-hash"
  }' \
  https://script.google.com/macros/s/TU_SCRIPT_ID/exec
```

## üîê Configuraci√≥n de reCAPTCHA (Opcional)

1. Ve a [Google reCAPTCHA](https://www.google.com/recaptcha/admin)
2. Registra un nuevo sitio:
   - Tipo: reCAPTCHA v3
   - Dominios: tu dominio + localhost (para desarrollo)
3. Copia las claves:
   - **Site Key** ‚Üí `NEXT_PUBLIC_RECAPTCHA_KEY`
   - **Secret Key** ‚Üí `RECAPTCHA_SECRET`

## üì¶ Estructura del Proyecto

```
.
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ route.ts          # API endpoint para registro
‚îÇ   ‚îú‚îÄ‚îÄ gracias/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # P√°gina de confirmaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ privacidad/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # Pol√≠tica de privacidad
‚îÇ   ‚îú‚îÄ‚îÄ terminos/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # T√©rminos y condiciones
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                # Layout principal con SEO
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                  # Landing page principal
‚îÇ   ‚îî‚îÄ‚îÄ globals.css               # Estilos globales
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ RegisterForm.tsx          # Formulario de registro
‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx                  # Secci√≥n hero
‚îÇ   ‚îú‚îÄ‚îÄ Gallery.tsx               # Galer√≠a de productos
‚îÇ   ‚îú‚îÄ‚îÄ Benefits.tsx              # Beneficios de la preventa
‚îÇ   ‚îú‚îÄ‚îÄ SizeGuide.tsx             # Gu√≠a de tallas
‚îÇ   ‚îú‚îÄ‚îÄ FAQ.tsx                   # Preguntas frecuentes
‚îÇ   ‚îî‚îÄ‚îÄ Footer.tsx                # Footer del sitio
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ types.ts                  # Tipos TypeScript y schemas
‚îÇ   ‚îú‚îÄ‚îÄ utils.ts                  # Funciones utilitarias
‚îÇ   ‚îî‚îÄ‚îÄ config.ts                 # Configuraci√≥n de la app
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ robots.txt                # Configuraci√≥n de robots
‚îÇ   ‚îú‚îÄ‚îÄ sitemap.xml               # Mapa del sitio
‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico               # Favicon
‚îú‚îÄ‚îÄ .env.example                  # Variables de entorno de ejemplo
‚îú‚îÄ‚îÄ .env.local                    # Variables de entorno (no commiteado)
‚îú‚îÄ‚îÄ next.config.js                # Configuraci√≥n de Next.js
‚îú‚îÄ‚îÄ tailwind.config.ts            # Configuraci√≥n de Tailwind
‚îú‚îÄ‚îÄ tsconfig.json                 # Configuraci√≥n de TypeScript
‚îî‚îÄ‚îÄ package.json                  # Dependencias del proyecto
```

## üöÄ Deployment en Vercel

1. **Conecta tu repositorio:**
   - Sube tu c√≥digo a GitHub/GitLab/Bitbucket
   - Importa el proyecto en [Vercel](https://vercel.com)

2. **Configura las variables de entorno:**
   - En Vercel, ve a Project Settings > Environment Variables
   - Agrega todas las variables de tu `.env.local`

3. **Despliega:**
   - Vercel desplegar√° autom√°ticamente
   - Cada push a `main` crear√° un nuevo deployment

## üé® Personalizaci√≥n

### Colores y Marca

Edita `tailwind.config.ts` para cambiar los colores principales:

```typescript
colors: {
  primary: {
    // Tus colores aqu√≠
  },
  secondary: {
    // Tus colores aqu√≠
  },
}
```

### Configuraci√≥n de la App

Edita `lib/config.ts`:

```typescript
export const APP_CONFIG = {
  name: 'TU MARCA',
  tagline: 'Tu tagline aqu√≠',
  // ...
};
```

### Modelos y Productos

Edita `lib/types.ts`:

```typescript
export const MODELOS_DISPONIBLES = [
  { value: 'tu-producto-1', label: 'Nombre del Producto 1' },
  // ...
];
```

## üì± Capturas de Pantalla

### Landing Page
- Hero section con CTA principal
- Galer√≠a de productos
- Formulario de registro inline
- Gu√≠a de tallas
- FAQ

### Flujo de Registro
1. Usuario completa el formulario
2. Validaci√≥n en tiempo real
3. Env√≠o a Google Sheets
4. Redirecci√≥n a p√°gina de agradecimiento
5. Opci√≥n de compartir en WhatsApp

## üß™ Testing

```bash
# Verificar tipos
npm run type-check

# Lint
npm run lint

# Build para producci√≥n
npm run build
```

## üìà Analytics y Tracking

### UTM Parameters

La landing captura autom√°ticamente:
- `utm_source`
- `utm_medium`
- `utm_campaign`
- `utm_content`

Ejemplo de URL con UTMs:
```
https://tu-dominio.com/?utm_source=instagram&utm_medium=stories&utm_campaign=preventa2024
```

### Google Tag Manager

1. Crea un contenedor en [Google Tag Manager](https://tagmanager.google.com)
2. Agrega tu GTM ID en `.env.local`:
   ```
   NEXT_PUBLIC_GTM_ID=GTM-XXXXXXX
   ```

## üîí Seguridad

- ‚úÖ IPs hasheadas con HMAC-SHA256
- ‚úÖ Token de autorizaci√≥n para webhook
- ‚úÖ Validaci√≥n de datos con Zod
- ‚úÖ reCAPTCHA v3 para prevenir spam
- ‚úÖ Headers de seguridad configurados
- ‚úÖ CORS controlado

## üêõ Troubleshooting

### El webhook no funciona

1. Verifica que el Apps Script est√© desplegado como "Aplicaci√≥n web"
2. Aseg√∫rate de que el token en el script coincida con `APP_WEBHOOK_TOKEN`
3. Revisa los logs en Google Apps Script (Ver > Registros)

### Los datos no aparecen en Google Sheets

1. Verifica el nombre de la hoja ("Registros")
2. Revisa que las columnas est√©n en el orden correcto
3. Comprueba los permisos de la hoja

### Error de CORS

El script de Apps Script debe estar desplegado con acceso "Cualquier persona"

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT.

## ü§ù Contribuciones

Las contribuciones son bienvenidas. Por favor, abre un issue primero para discutir los cambios que te gustar√≠a hacer.

## üìû Soporte

Para soporte, contacta a: hola@xclusiv.com

---

**Desarrollado con ‚ù§Ô∏è usando Next.js 14**
